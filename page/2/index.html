
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Blog</title>
  <meta name="author" content="Diego Zamboni">

  
  <meta name="description" content="I got this photo of a bookshelf at the CFEngine office in Palo Alto. Looks awesome, doesn&#8217;t it? :) ">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://zzamboni.org/blog.cf-learn.info/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Blog</a></h1>
  
    <h2>News about "Learning CFEngine 3"</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:zzamboni.org/blog.cf-learn.info" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="http://cf-learn.info/">The Book</a></li>
  <li><a href="http://cf-learn.info/author.html">The Author</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="http://cf-learn.info/discussion.html">Forum</a></li>
  <li><a href="http://cf-learn.info/code.html">Code</a></li>
  <li><a href="http://oreilly.com/catalog/errata.csp?isbn=0636920022022">Errata</a></li>
  <li><a href="http://cf-learn.info/reviews.html">Reviews</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/a-full-shelf">A Full Shelf</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-25T15:33:10-05:00" pubdate data-updated="true">Apr 25<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content">I got this photo of a bookshelf at the CFEngine office in Palo Alto. Looks awesome, doesn&#8217;t it? :)<p></p>
<div>
<div class="p_embed p_image_embed">
<a href="/images/2012/04/25/a-full-shelf/40472230-photo.jpeg"><img alt="Photo" height="375" src="/images/2012/04/25/a-full-shelf/40472230-photo.jpeg" width="500"></a>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/cfengine-tip-001-modularize-complex-policies">CFEngine Tip #001: Modularize Complex Policies Using Methods: Calls</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-23T09:44:00-05:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div>Welcome to the new &#8220;CFEngine tip&#8221; series. In this series of posts I will explore different tips, tricks and techniques for making better use of CFEngine. For now I will post weekly, but the frequency may change as time goes by. If you have any suggestions for topics that I should cover in this series, please <a href="http://cf-learn.info/contact.html">let me know</a>!</div>
<p></p>
<div>For our first installment, we will talk about methods: promises, and how they can be used to make policies both clearer and more extensible.</div>
<div>
<hr>
</div>
<p>As your CFEngine policies grow in complexity, they become harder to read if all your promises are in a single bundle, or if you split them among bundles, to have all those bundles listed in the <a href="http://cf-learn.info/ref/bundlesequence">bundlesequence</a> declaration.</p>
<div>Enter the <a href="http://cf-learn.info/ref/methods">methods:</a> promise type. Promises of this type allow you to call other bundles in sequence, passing arbitrary parameters. For example, consider the following example (from <a href="http://cf-learn.info/code/ch05/configfiles5.cf.html">Chapter 5</a> of &#8220;Learning CFEngine 3&#8221;):</div>
<p><div><script src='https://gist.github.com/2471468.js?file=methods_ex1.cf'></script>
<noscript><pre><code>bundle agent configfiles
{
  vars:  
      # Files to edit
      &quot;files[sysctlconf]&quot; string =&gt; &quot;/etc/sysctl.conf&quot;;
      &quot;files[sshdconfig]&quot; string =&gt; &quot;/etc/ssh/sshd_config&quot;;
      &quot;files[inittab]&quot;    string =&gt; &quot;/etc/inittab&quot;;
      # ...

  methods:
      # Pass the name of the array, not the array itself.
      &quot;backup&quot;  usebundle =&gt; backup_files(&quot;configfiles.files&quot;);
      &quot;sysctl&quot;  usebundle =&gt; edit_sysctl;
      &quot;sshd&quot;    usebundle =&gt; edit_sshd;
      &quot;inittab&quot; usebundle =&gt; edit_inittab;
      &quot;users&quot;   usebundle =&gt; manage_users(&quot;configfiles.users&quot;);
}
</code></pre></noscript></div>
</p>
<div>The methods: section makes it very easy to see the sequence of actions that will take place: backup some files, configure sysctl, sshd, inittab and users in sequence. This helps both in clarity and in code reusability: each bundle can perform logically different functionality, and they could potentially be reused in different settings and with different parameters. The promiser string in a methods: promise is an arbitrary string. The CFEngine documentation uses &#8220;any&#8221;, but you can also use it, as in this example, to indicate the purpose of the promise.</div>
<p></p>
<div>Furthermore, you can use CFEngine&#8217;s <a href="https://cfengine.com/manuals/cf3-reference#Loops-and-lists-in-CFEngine-3">implicit looping</a> to create generic promises that will call as many other bundles as necessary. Consider this <a href="http://cf-learn.info/code/ch05/configfiles7.cf.html">revised code</a>:</div>
<p><div><script src='https://gist.github.com/2471468.js?file=methods_ex2.cf'></script>
<noscript><pre><code>bundle agent configfiles
{
  vars:  
      # Files to edit
      &quot;files[sysctl]&quot;     string =&gt; &quot;/etc/sysctl.conf&quot;;
      &quot;files[sshd]&quot;       string =&gt; &quot;/etc/ssh/sshd_config&quot;;
      &quot;files[inittab]&quot;    string =&gt; &quot;/etc/inittab&quot;;
      # ...

      &quot;file_id&quot; slist =&gt; getindices(&quot;files&quot;);
      &quot;bundle_names&quot; slist =&gt; maplist(&quot;edit_$(this)&quot;, &quot;file_id&quot;);

  methods:
      &quot;backup&quot;  usebundle =&gt; backup_files(&quot;configfiles.files&quot;);
      &quot;$(bundle_names)&quot;  usebundle =&gt; $(bundle_names)(&quot;configfiles.files&quot;);
      &quot;users&quot;   usebundle =&gt; manage_users(&quot;configfiles.users&quot;);
}
</code></pre></noscript></div>
</p>
<div>Now the list of bundles to call (edit_sysctl, edit_sshd and edit_inittab) is being built on the fly from the contents of the files array, and used through implicit looping to call the bundles in the methods: promises. Note how you can even pass arguments to these calls. This makes it very easy to extend the functionality by simply adding new elements to the files array (and of course, defining the appropriate edit_* bundle).</div>
<p></p>
<div>Until next time!</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/new-reviews-page">New &#8220;Reviews&#8221; Page</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-20T01:10:36-05:00" pubdate data-updated="true">Apr 20<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content">I have started collecting some of the nice things I have read people say about the book, and put them in the <a href="http://cf-learn.info/reviews.html">Reviews</a> page. Check it out!
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/the-bird-on-the-cover-of-learning-cfengine-3">The Bird on the Cover of &#8220;Learning CFEngine 3&#8221;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-26T22:17:06-06:00" pubdate data-updated="true">Mar 26<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content">A lot of people have asked me about the bird on the cover of the book, and I had to admit I didn&#8217;t know. Unfortunately, the book (even in the print version) does not include a description of the cover in the Colophon, like most other O&#8217;Reilly books. But today I got the information directly from Karen Montgomery at O&#8217;Reilly, who designed the cover:<p></p>
<div>The bird is a <a href="http://en.wikipedia.org/wiki/Tui_(bird)">Tui</a>, a kind of bird that leaves in New Zealand, also known as a Parson Bird. Here&#8217;s a photo of a real Tui bird:</div>
<p></p>
<div>
<div class="p_embed p_image_embed">
<a href="/images/2012/03/26/the-bird-on-the-cover-of-learning-cfengine-3/39446356-Tui_on_flax.jpeg"><img alt="Tui_on_flax" height="333" src="/images/2012/03/26/the-bird-on-the-cover-of-learning-cfengine-3/39446356-Tui_on_flax.jpeg" width="500"></a>
</div>
</div>
<div>(photo by <a href="http://www.flickr.com/photos/69029168@N00">Matt Binns</a>, reused under the <a href="http://creativecommons.org/licenses/by/2.0/deed.en">Creative Commons Attribution 2.0 Generic</a> license)</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/my-first-batch-of-print-books-arrived">My First Batch of Print Books Arrived</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-26T07:56:32-06:00" pubdate data-updated="true">Mar 26<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content">I&#8217;m visiting Purdue University today to give a talk and to visit old friends and colleagues. And the first box of books arrived here! It&#8217;s incredible to have the physical book in my hand.<p></p>
<div class="p_embed p_image_embed">
<img alt="Img_0515" height="640" src="/images/2012/03/26/my-first-batch-of-print-books-arrived/39422579-IMG_0515.jpeg" width="479">
</div>
<p>This is the building where I spent most of my grad school years.</p>
<p></p>
<div class="p_embed p_image_embed">
<a href="/images/2012/03/26/my-first-batch-of-print-books-arrived/39422580-IMG_0514.jpeg"><img alt="Img_0514" height="374" src="/images/2012/03/26/my-first-batch-of-print-books-arrived/39422580-IMG_0514.jpeg" width="500"></a>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/cfengine-related-speaking-engagements-from-ma">CFEngine-related Speaking Engagements From March 26th-28th, 2012</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-24T23:57:00-06:00" pubdate data-updated="true">Mar 24<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I will be giving three CFEngine related talks this week. I would love to see you at any one of them!</p>
<p></p>
<div>
<strong>March 26th</strong> - Purdue University, Lawson CS Building 3102, West Lafayette, IN, 1:30PM</div>
<p></p>
<div style="padding-left: 30px;">
<span style=""> </span>&#8220;CFEngine 3: Empowering the Next-Generation SysAdmin&#8221;</div>
<p></p>
<div>
<strong>March 27th</strong> - <a href="http://www.meetup.com/devops/events/51903632/">Chicago Devops Meetup, Morningstar, Chicaco, IL, 5:30PM</a>
</div>
<p></p>
<div style="padding-left: 30px;">
<span style=""> </span>&#8220;CFEngine 3: Empowering the Next-Generation SysAdmin&#8221;</div>
<p></p>
<div>
<strong>March 28th</strong> - <a href="http://campconferences.com/events/2012/iom.htm">CampIT conference on IT Infrastructure &amp; Operations Management, Chicago, IL, 9:00AM</a>
</div>
<p></p>
<div style="padding-left: 30px;">
<span style=""> </span>&#8220;Achieving IT Infrastructure and Operational Excellence&#8221;</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/book-status-released">Book Status: Released!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-23T11:45:12-06:00" pubdate data-updated="true">Mar 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div><a href="http://shop.oreilly.com/product/0636920022022.do"><div class="p_embed p_image_embed">
<img alt="Cat" height="236" src="/images/2012/03/23/book-status-released/39333994-cat.gif" width="180">
</div>
</a></div>
<p></p>I am ecstatic to announce that the book is now officially released! You can get it here: <a href="http://shop.oreilly.com/product/0636920022022.do">http://shop.oreilly.com/product/0636920022022.do</a>. If you purchased the Early Release version, you should automatically be able to download the final version from your &#8220;Your products&#8221; page at <a href="http://oreilly.com">oreilly.com</a>.<p></p>
<div>It&#8217;s been an incredible ride, and it&#8217;s an incredible feeling to see it come to this big milestone (I won&#8217;t say &#8220;the end&#8221;, because I know this book will keep evolving).</div>
<p></p>
<div>There have been so many people who helped me through this process, including my editor (Andy Oram), all the staff at O&#8217;Reilly, who have been so professional and helpful, my very competent tech reviewers (Mark Burgess and Jesse Becker), all my colleagues at CFEngine AS, all the readers of intermediate and partial versions of the book, all the people who purchased the Early Release, and of course, my lovely wife and my two beautiful daughters, who were so patient while I worked on &#8220;the book&#8221;. Everyone gave me encouragement, incredible feedback, and tons of guidance and support. Thank you everyone!</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/syntax-highlighting-in-learning-cfengine-3">Syntax Highlighting in &#8220;Learning CFEngine 3&#8221;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-16T17:16:44-06:00" pubdate data-updated="true">Mar 16<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content">The electronic versions of the book contain full syntax highlighting and other useful features. I&#8217;m biased of course, but I think it is both functional and beautiful. Here&#8217;s a sample from Chapter 4:<p></p>
<blockquote class="webkit-indent-blockquote" style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>
<div class="p_embed p_image_embed">
<a href="/images/2012/03/16/syntax-highlighting-in-learning-cfengine-3/39091981-final_web.pdf%20(page%20126%20of%20182)-1.jpg"><img alt="Final_web" height="527" src="/images/2012/03/16/syntax-highlighting-in-learning-cfengine-3/39091981-final_web.pdf%20(page%20126%20of%20182)-1.jpg" width="500"></a>
</div>
</div></blockquote>
<p></p>
<div>The syntax highlighting in my opinion greatly helps in reading the code. Additionally, each one of those numbered callouts in the code are in-document links that take you to the paragraph where that part of the code is described. Conversely, the callouts in the text take you back to the corresponding line in the code. And finally, most CFEngine keywords and concepts are links to the corresponding description in the CFEngine Reference Manual. In the PDF, clicking on that blue &#8220;files:&#8221; in the last paragraph will take you to <a href="http://cf-learn.info/ref/files">http://cf-learn.info/ref/files</a>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/book-status-print-ready">Book Status: Print-ready</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-16T11:55:26-06:00" pubdate data-updated="true">Mar 16<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content">I am very happy! I got the notification today that the final book draft has been produced and sent to the printer. This means that over the next few days the final version will be available for purchase, both as e-book and in print form. I will of course let you know when this happens. <p></p> For now, time to enjoy a relaxing weekend, the first with no book-related work in a long time :)
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/cfengine-community-event-march-8th-2012">CFEngine Community Event: March 8th, 2012</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-05T10:43:25-06:00" pubdate data-updated="true">Mar 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content">I am visiting the Bay Area this week, and we took the opportunity to organize a <a href="http://cfengine3paloalto.eventbrite.com/">CFEngine community event</a> on Thursday, March 8th, at 6:30 PM. Come by, meet the CFEngine team, hear about some of the exciting things we are working on, and give us your feedback for the future.<p></p>
<div>Hope to see you there! If you plan to attend please don&#8217;t forget to <a href="http://cfengine3paloalto.eventbrite.com/">register</a>.</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/cfengine-documentation-index-updated/">CFEngine documentation index updated</a>
      </li>
    
      <li class="post">
        <a href="/blog-moving/">Blog moving</a>
      </li>
    
      <li class="post">
        <a href="/learning-cfengine-3-at-lisa12">&#8220;Learning CFEngine 3&#8221; at LISA&#8217;12</a>
      </li>
    
      <li class="post">
        <a href="/second-release-of-learning-cfengine-3">Second release of &#8220;Learning CFEngine 3&#8221;</a>
      </li>
    
      <li class="post">
        <a href="/cfengine-tip-004-how-to-bootstrap-a-cfengine">CFEngine tip #004: How to bootstrap a CFEngine client</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Diego Zamboni -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
